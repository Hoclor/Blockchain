\documentclass[11pt,a4paper]{article}
%\usepackage{harvard}
\usepackage[margin=2cm, bottom=2cm]{geometry}
\usepackage{graphicx}
\usepackage{tabularx}
\usepackage{color}
\usepackage{caption}
\usepackage{tabu}
\usepackage{gensymb}
\usepackage{enumitem}

\captionsetup[figure]{labelfont=bf}
\captionsetup[table]{labelfont=bf}

\title{\vspace{-2em}Blockchain and Cryptocurrencies Coursework}
\author{pbqk24}
%\date{}

\begin{document}
	\maketitle
	
	\vspace{-3em}
	
	\section{Mining Puzzles}
	
	\subsection{Proof of Work}
	The requested information for Proof of Work is as follows:
		
	\begin{table}[h!]
		\centering
		\begin{tabu} to 1.0\linewidth {|r|p{8.5cm}|X[l]|}
			\hline
			Index&Information&Value\\
			\hline
			1&User ID&pbqk24\\
			\hline
			2&Block hash target calculated (hex)&000003e7fc1800000000000000000000\newline00000000000000000000000000000000\\
			\hline
			3&Nonce value (int)&$2171906$\\
			\hline
			4&Number of (double) hashes performed&$2171907$ (one per nonce tried, starting at 0)\\
			\hline
			5&Estimate for mining time for difficulty $= 1$&$58629$ seconds\\
			 &Estimate for mining time for difficulty $= 7454968648263$&$4.37*10^{17}$ seconds\\
			\hline
		\end{tabu}
		\caption{Mining Puzzles: Information Requested}
		\label{table_mining_puzzles}
	\end{table}

	\noindent The equations used for calculating the mining time estimates $t$ are as follows:
	
	\begin{equation}
	target = \frac{target_{initial}}{difficulty}
	\end{equation}
	
	\begin{equation}
	h_q = \frac{h_{space}}{target}
	\end{equation}
	
	\begin{equation}
	t = h_q * t_h
	\end{equation}
	
	Where $h_q$ is the estimated number of hashes required to be performed to find a valid hash, $target$ is the target value, $t_h$ is the estimated time per hash calculated by timing how long it takes to perform a large number of hashes (e.g. $10^9$) and finding the average. $t_h$ was computed as $1.365*10^{-5}$ and used for both calculations.
	
	For difficulty of $1$:
	
	$$target = \frac{00000000FFFF0000000000000000000000000000000000000000000000000000}{1}$$
	
	$$h_q = \frac{2^{256}}{00000000FFFF0000000000000000000000000000000000000000000000000000} = 4295032833$$
	
	$$t = 4295032833 * 1.365*10^{-5} = 58629$$
	
	For difficulty of $7454968648263$:
	
	$$target = \frac{00000000FFFF0000000000000000000000000000000000000000000000000000}{7454968648263} = 3.62*10^{54}$$
	
	$$h_q = \frac{2^{256}}{3.62*10^{54}} = 3.2 * 10^{22}$$
	
	$$t = 3.2 * 10^{22} * 1.365*10^{-5} = 4.37*10^{17}$$
	
	\subsection{Proof of Stake}
	
	The requested information for Proof of Stake is as follows:
	
	\begin{table}[h!]
		\centering
		\begin{tabu} to 1.0\linewidth {|r|p{7cm}|X[l]|}
			\hline
			Index&Information&Value\\
			\hline
			6&ECDSA public key (hex)&4f045a6cfacb3e67e7c5d4ddfb9f1acfe7d6ddda\newline c29869734cce5218cdab24e2d2cc72601138d6f\newline 324464df7691f819cd14e8b3752d9c463e5162a\newline ad37393ca0\\
			\hline
			7&Signature of "Hello world" (hex)&eae12ab8fdbeb5635ac45edbfceb999907a5b090\newline 42eeddbd9a07a744f656b3ac7e00124086256e5\newline caf86539e68186742d593e5e8b537b9f6d7ee055\newline 57c2ef68a\\
			\hline
			8&Signature used to calculate hit (hex)&aa2974089248c51977f63350c3aad2757b935d68\newline a236dd777621c3ed879657d2c5e1f01d22ad16b\newline b2d37f1c2567d1daeccd4e3f1a45201f53291e2e\newline ba9e9bea3\\
			\hline
			9&Hit value (hex)&a135a0781dd3c0f6\\
			\hline
			10&Time (s) that you could forge a new block&394\\
			\hline
		\end{tabu}
		\caption{Mining Puzzles: Information Requested}
		\label{table_mining_puzzles}
	\end{table}
	
	\noindent The equations used for calculating the hit value are as follows:
	
	\begin{equation}
	hit_{full} = hash(sign(S_g))
	\end{equation}
	
	Where the hit value is the first 8 bytes of $hit_{full}$, and $S_g$ is the generation signature for the previous block:
	
	$$S_g = 9737957703d4eb54efdff91e15343266123c5f15aaf033292c9903015af817f1$$
	
	$$sign(S_g) = aa2974089248c51977f63350c3aad2757b935d68a236dd777621c3ed879657d2c5e1f01d22ad16bb2d37f1c2567d1daeccd4e3f1a45201f53291e2eba9e9bea3$$
	
	$$hash(sign(S_g))[:8] = a135a0781dd3c0f6$$
	
	\noindent The time in seconds when you would be able to forge a new block was calculated using the following equations:
	
	\begin{equation}
	T = T_b * B_e
	\end{equation}
	
	\begin{equation}
	t_{forge} = \frac{hit}{T}
	\end{equation}
	
	Where $T$ is the target value (independent of time passed), $T_b$ is the base target value, $B_e$ is your effective balance, and $t_{forge}$ is the time when you can forge a new block (rounded up, in seconds):
	
	$$T = 1229782938247303 * 24 = 29514790517935272$$
	
	$$t_{forge} = \frac{11616367251628998902}{29514790517935272} = 394$$
	
\end{document}